
=> grep for FIXME :)


BUGS?
- proper state diagram for sync, presync, etc. on REPLICAS, and relationshipo to client access?


ISSUES
- log
  - overall logging strategy.  
    - currently (?): do everything immediately, reply when logged.
  - the log grows indefinitely

- is lock > freeze a bad plan?  what happens when we need to lock multiple spots
  in the hierarchy.. will that cause deadlock?

- is it practical for replicas to not know who the authority is?
  - maybe pin old authorities with CACHEPROXY, send a notify to replicas,
    unpin when they're all received.  cached_by would be defined during
    this period.  would reduce to 1 message (with big dir+inode list)
    per mds per export...  and make inode_expire, etc. much less lame.

/- better authority knowledge of replicas, especially with
/  - sync
/  - lock
  - ??


FIX
- soft and hard metadata should be fully independent?
  - hard lock (owner/mode) is relative to namespace
  - soft sync (mtime/size) is relative to inode (even when dangling)


CLEANUP
- client


DOCUMENT


TEST
- test hash/unhash operation
- hash+export: encode list of replicated dir inodes so they can be discovered before import is procesed.
- test nauthitems (wrt hashing?)


IMPLEMENT
- dir sync
 - stat of a dir should return dir size?
 - readdir of hashed dir

- softasync mode
- rmdir
- mkdir
- rename

- log MDS actions
  - imports/exports
  - hash/unhash

- smarter balancing
  - popularity calculation and management is inconsistent, wrong.
  - does it work?

- instrumentation!
- dump active config in run output somewhere

- anchors and hard links
